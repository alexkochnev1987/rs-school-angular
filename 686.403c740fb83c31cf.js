"use strict";(self.webpackChunkrs_school=self.webpackChunkrs_school||[]).push([[686],{1686:(E,g,t)=>{t.r(g),t.d(g,{LoginModule:()=>Y});var p=t(6895),d=t(2965),i=t(4006),h=t(7579),v=t(2722),l=t(4854),n=t(4650),w=t(3788),C=t(4004),b=t(3900),m=t(9646),Z=t(4086),c=t(8384),y=t(322),L=t(9653);let S=(()=>{class e{constructor(o){this.store=o,this.spinnerState$=this.store.select(y.MB)}requestStarted(o){this.store.dispatch((0,c.PV)({name:o}))}requestEnded(o){this.store.dispatch((0,c.ri)({name:o}))}getLoading(o){return this.spinnerState$.pipe((0,C.U)(r=>r[o]),(0,b.w)(r=>r?(0,m.of)(!0).pipe((0,Z.g)(500)):(0,m.of)(!1)))}}return e.\u0275fac=function(o){return new(o||e)(n.LFG(L.yh))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=t(1572);function A(e,s){1&e&&(n.TgZ(0,"p"),n._uU(1," Please enter a login email. "),n.qZA())}function T(e,s){1&e&&(n.TgZ(0,"p"),n._uU(1,"The login email is invalid."),n.qZA())}function _(e,s){1&e&&(n.TgZ(0,"p"),n._uU(1," Add at least 8 characters. "),n.qZA())}function x(e,s){1&e&&(n.TgZ(0,"p"),n._uU(1," Add letter in uppercase. "),n.qZA())}function P(e,s){1&e&&(n.TgZ(0,"p"),n._uU(1," Add letter in lowercase. "),n.qZA())}function I(e,s){1&e&&(n.TgZ(0,"p"),n._uU(1," Add number. "),n.qZA())}function M(e,s){if(1&e&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&e){const o=n.oxw(2);n.xp6(1),n.hij(" Add special symbol (",o.PasswordValidatorSymbols.symbol,") ")}}function N(e,s){if(1&e&&(n.TgZ(0,"div",13)(1,"h3",14),n._uU(2,"Your password isn't strong enough."),n.qZA(),n.YNc(3,_,2,0,"p",5),n.YNc(4,x,2,0,"p",5),n.YNc(5,P,2,0,"p",5),n.YNc(6,I,2,0,"p",5),n.YNc(7,M,2,1,"p",5),n.qZA()),2&e){const o=n.oxw();n.xp6(3),n.Q6J("ngIf",null==o._password||null==o._password.errors?null:o._password.errors[o.PasswordValidatorSymbols.minLength]),n.xp6(1),n.Q6J("ngIf",null==o._password||null==o._password.errors?null:o._password.errors[o.PasswordValidatorSymbols.upperCase]),n.xp6(1),n.Q6J("ngIf",null==o._password||null==o._password.errors?null:o._password.errors[o.PasswordValidatorSymbols.lowerCase]),n.xp6(1),n.Q6J("ngIf",null==o._password||null==o._password.errors?null:o._password.errors[o.PasswordValidatorSymbols.numbers]),n.xp6(1),n.Q6J("ngIf",null==o._password||null==o._password.errors?null:o._password.errors[o.PasswordValidatorSymbols.special])}}function U(e,s){1&e&&n._UZ(0,"mat-spinner",15)}const J=[{path:"",component:(()=>{class e{constructor(o,r,u){this.authService=o,this.router=r,this.spinnerService=u,this.unsubscribe$=new h.x,this.isLoading$=this.spinnerService.getLoading(l.be.login),this.login=new i.cw({userName:new i.NI("",[i.kI.required,i.kI.email]),password:new i.NI("",[i.kI.minLength(8),i.kI.required,this.passwordValidator])}),this.PasswordValidatorSymbols=l.Ar}get _password(){return this.login.get("password")}get _user(){return this.login.get("userName")}logIn(){return this.authService.login()}logOut(){this.authService.logout(),localStorage.clear()}onSubmit(){this.spinnerService.requestStarted(l.be.login),this.logIn().pipe((0,v.R)(this.unsubscribe$)).subscribe(o=>{this.router.navigate([l.A.main]),this.spinnerService.requestEnded(l.be.login)})}ngOnDestroy(){this.unsubscribe$.next(0),this.unsubscribe$.complete()}passwordValidator(o){const r=new RegExp("[A-Z]"),u=new RegExp("[a-z]"),Q=new RegExp("[0-9]"),V=new RegExp("[*@!#%&()^~{}]");let a={};return o.value.match(r)||(a[l.Ar.upperCase]=!0),o.value.match(u)||(a[l.Ar.lowerCase]=!0),o.value.match(Q)||(a[l.Ar.numbers]=!0),o.value.match(V)||(a[l.Ar.special]=!0),0===Object.keys(a).length?null:a}}return e.\u0275fac=function(o){return new(o||e)(n.Y36(w.e),n.Y36(d.F0),n.Y36(S))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],decls:22,vars:10,consts:[[1,"d-flex","align-items-center","justify-content-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","inputName",1,"text-muted"],["type","text","id","inputName","formControlName","userName","placeholder","Enter email",1,"form-control"],[4,"ngIf"],["for","inputPassword",1,"text-muted"],["formControlName","password","type","password","id","inputPassword","placeholder","Password",1,"form-control"],["class","error",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"d-flex"],["class","m-0 p-0","diameter","20","color","primary",4,"ngIf"],[1,"m-0","p-0","pl-2"],[1,"error"],[1,"m-0"],["diameter","20","color","primary",1,"m-0","p-0"]],template:function(o,r){1&o&&(n.TgZ(0,"div",0)(1,"form",1),n.NdJ("ngSubmit",function(){return r.onSubmit()}),n.TgZ(2,"h2"),n._uU(3,"Login"),n.qZA(),n.TgZ(4,"div",2)(5,"label",3),n._uU(6,"Name"),n.qZA(),n._UZ(7,"input",4),n.YNc(8,A,2,0,"p",5),n.YNc(9,T,2,0,"p",5),n.qZA(),n.TgZ(10,"div",2)(11,"label",6),n._uU(12,"Password"),n.qZA(),n._UZ(13,"input",7),n.YNc(14,N,8,5,"div",8),n.qZA(),n.TgZ(15,"button",9),n.ALo(16,"async"),n.TgZ(17,"div",10),n.YNc(18,U,1,0,"mat-spinner",11),n.ALo(19,"async"),n.TgZ(20,"p",12),n._uU(21,"Submit"),n.qZA()()()()()),2&o&&(n.xp6(1),n.Q6J("formGroup",r.login),n.xp6(7),n.Q6J("ngIf",(null==r._user?null:r._user.hasError("required"))&&(null==r._user?null:r._user.dirty)),n.xp6(1),n.Q6J("ngIf",null==r._user?null:r._user.hasError("email")),n.xp6(5),n.Q6J("ngIf",(null==r._password?null:r._password.dirty)&&(null==r._password?null:r._password.invalid)),n.xp6(1),n.Q6J("disabled",!r.login.valid||n.lcZ(16,6,r.isLoading$)),n.xp6(3),n.Q6J("ngIf",n.lcZ(19,8,r.isLoading$)))},dependencies:[p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,f.Ou,p.Ov],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-dirty.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.alert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fed3d3;color:#820000;padding:1rem;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}select[_ngcontent-%COMP%]{width:100%;padding:.5rem}.error[_ngcontent-%COMP%]{color:red}.error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[d.Bz.forChild(J),d.Bz]}),e})(),Y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[p.ez,O,i.u5,i.UX,f.Cq]}),e})()}}]);